From 8e8ff3620fe0726eaf5488e558e913ef5b16a93d Mon Sep 17 00:00:00 2001
From: Martin Preisler <mpreisle@redhat.com>
Date: Tue, 21 Oct 2014 13:25:10 +0200
Subject: [PATCH] Use absolute paths for tailoring and input files when
 extracting RPM

This fixes RPM opening functionality.
---
 src/RPMOpenHelper.cpp | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/src/RPMOpenHelper.cpp b/src/RPMOpenHelper.cpp
index 589b809..565eaa1 100644
--- a/src/RPMOpenHelper.cpp
+++ b/src/RPMOpenHelper.cpp
@@ -23,7 +23,6 @@
 #include "ProcessHelpers.h"
 #include "Exceptions.h"
 #include <QDir>
-#include <QDebug>
 
 RPMOpenHelper::RPMOpenHelper(const QString& path)
 {
@@ -39,7 +38,7 @@ RPMOpenHelper::RPMOpenHelper(const QString& path)
 
     proc.run();
 
-    QDir tempDir(mTempDir.getPath());
+    const QDir tempDir(mTempDir.getPath());
 
     if (proc.getExitCode() != 0)
     {
@@ -68,9 +67,9 @@ RPMOpenHelper::RPMOpenHelper(const QString& path)
             // This is required because "tailoring-xccdf.xml" will match both tailoringRE and inputRE!
 
             if (tailoringRE.exactMatch(line))
-                mTailoringPath = tempDir.relativeFilePath(line);
+                mTailoringPath = tempDir.absoluteFilePath(line);
             else if (inputRE.exactMatch(line))
-                mInputPath = tempDir.relativeFilePath(line);
+                mInputPath = tempDir.absoluteFilePath(line);
         }
     }
 }
